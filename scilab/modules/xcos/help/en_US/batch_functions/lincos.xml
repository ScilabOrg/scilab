<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Scicos
 * 
 * Copyright (C) INRIA - METALAU Project <scicos@inria.fr> (HTML version)
 * Copyright (C) DIGITEO - Scilab Consortium (XML Docbook version)
 * 
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301, USA.
 * 
 * See the file ./license.txt
 -->
<refentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svg="http://www.w3.org/2000/svg" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:db="http://docbook.org/ns/docbook" xmlns:scilab="http://www.scilab.org" xml:id="lincos" xml:lang="en">
    <refnamediv>
        <refname>lincos</refname>
        <refpurpose>Constructs by linearization a linear state-space
            model from a general dynamical system described by a Xcos
            diagram
        </refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <title>Calling Sequence</title>
        <synopsis>sys = lincos(scs_m [,X0,U0 [,param] ])</synopsis>
    </refsynopsisdiv>
    <refsection id="Parameters_lincos">
        <title>Arguments</title>
        <itemizedlist>
            <listitem>
                <para>
                    <emphasis role="bold">scs_m :</emphasis> a xcos data structure
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">X0:</emphasis> a column
                    vector which gives steady states values for all
                    the continuous states of the system. It size must
                    be equal to the sum of the sizes of the block's
                    continuous states. X0 can be set to [] or omitted
                    if steady states values are all supposed to be
                    zero.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">U0:</emphasis> a column vector
                    which gives the steady state values for all the inputs
                    of the system (the inputs correspond to the input
                    ports). It size must be equal to the sum of the sizes
                    of the signals expected on the input ports <link
                linkend="IN_f">inputs</link>. U0 entries corresponds
                    to the catenation of the input port signals ordered
                    according to the port's number. U0 can be set to [] or
                    omitted if all initial inputs are supposed to be zero.
                </para>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">param :</emphasis> list with two
                    elements (default list(1.d-6,0)). 
                </para>
                <itemizedlist>
                    <listitem>
                        <para>param(1): a scalar. Perturbation level for
                            linearization; the following variation is used
                            del([x;u])_i =param(1)+param(1)*1d-4*abs([x;u])_i. 
                        </para>
                    </listitem>
                    <listitem>
                        <para> param(2): a scalar. The value of time which
                            needs to be specified is the model of the system
                            depends on the time.
                        </para>
                    </listitem>
                </itemizedlist>
            </listitem>
            <listitem>
                <para>
                    <emphasis role="bold">sys :</emphasis> a linear
                    dynamical system data structure (see <link
                  linkend="syslin">syslin</link>.
                </para>
            </listitem>
        </itemizedlist>
    </refsection>
    
    <refsection id="Module_lincos">
        <title>Module</title>
        <itemizedlist>
            <listitem>
                <para>
                    <link linkend="xcos">xcos</link>
                </para>
            </listitem>
        </itemizedlist>
    </refsection>
    <refsection id="Description_lincos">
        <title>Description</title>
        <para>
            Construct a linear state-space system by linearizing a
            model given as a Xcos diagram. The idea is to approximate
            the continuous time part of a <link
            linkend="SUPER_f">sub-diagram</link> by a linear
            state-space model near the given steady state. The
            sub-diagram should have <link linkend="IN_f">inputs</link>
            and <link linkend="OUT_f">outputs</link>.
        </para>
        
    </refsection>
    <refsection>
        <title>Examples</title>
        <programlisting role="example"><![CDATA[
// loading data
exec("SCI/modules/xcos/tests/unit_tests/PENDULUM_ANIM.sci");
exec("SCI/modules/xcos/tests/unit_tests/anim_pen.sci");

importXcosDiagram("SCI/modules/xcos/tests/unit_tests/pendulum_anim45.zcos");

// specific context data
M  = 10;
m  = 3;
l  = 3;
ph = 0.1;
z0 = -4;
th0 = .02;

// looking for the Superblock to linearize
for i=1:length(scs_m.objs)
    if typeof(scs_m.objs(i))=="Block" & scs_m.objs(i).gui=="SUPER_f" then
        scs_m = scs_m.objs(i).model.rpar;
        break;
    end
end

sys = lincos(scs_m);

bode(sys);
 ]]></programlisting>
    </refsection>
    <refsection id="SeeAlso_lincos">
        <title>See Also</title>
        <itemizedlist>
            <listitem>
                <para>
                    <link linkend="steadycos">steadycos</link> - Finds
                    an equilibrium state of a general dynamical system
                    described by a xcos diagram (Scilab Function)
                </para>
            </listitem>
            <listitem>
                <para>
                    <link
                    linkend="scicos_simulate">scicos_simulate</link> -
                    Function for running xcos simulation in batch mode
                    (Scilab Function)
                </para>
            </listitem>
        </itemizedlist>
    </refsection>
</refentry>
