// =============================================================================
// Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) 2008 - INRIA
// Copyright (C) 2009 - DIGITEO
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================
// <-- ENGLISH IMPOSED -->
ilib_verbose(0);
exec(fullfile(SCI,"modules","xcos","tests","unit_tests","PENDULUM_ANIM.sci"));
exec(fullfile(SCI,"modules","xcos","tests","unit_tests","anim_pen.sci"));
importXcosDiagram(fullfile(SCI,"modules","xcos","tests","unit_tests","pendulum_anim45.xcos"));
M  = 10;
m  = 3;
l  = 3;
ph = 0.1;
for i=1:length(scs_m.objs)
    if typeof(scs_m.objs(i))=="Block" & scs_m.objs(i).gui=="SUPER_f" then
        scs_m = scs_m.objs(i).model.rpar;
        break;
    end
end
// scs_m is the top SUPER_f;
[X,U,Y,XP] = steadycos(scs_m,[],[],[],[],1,1:$);
// valid results
X_ref = [..
    0.  ;..
    0.  ;..
    0.  ;..
    0.  ];
U_ref = [..
    12.731756  ];
Y_ref = [..
    0.  ;..
    0.  ];
XP_ref = [..
    0.  ;..
    0.  ;..
    0.  ;..
    0.  ];
// diff
margin = 1D-06;
if and(abs(X - X_ref) > margin) |..
   and(abs(U - U_ref) > margin) |..
   and(abs(Y - Y_ref) > margin) |..
   and(abs(XP - XP_ref) > margin) then bugmes();quit;end
