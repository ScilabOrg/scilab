<?xml version="1.0"?>
<menubar>

   <!-- All "main" menus are disabled when created and then enabled in scilab.start file after all macros are loaded -->

   <!-- File menu -->
   <menu label="&amp;File" enabled="false">
        <submenu label="&amp;Execute...">
            <callback
            instruction='
              %fileToExec = uigetfile("*.sc*", "", gettext("Select a file to execute"));
              if ~(%fileToExec == "") then
                exec(%fileToExec);
                disp(msprintf(gettext("Execution done.\n")));
              end
              clear("%fileToExec");'
            type="0"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Open a file...">
            <callback
            instruction='
              %fileToOpen = uigetfile("*.sc*", "", gettext("Select a file to open with Scilab text editor"));
              if ~(%fileToOpen == "") then
                editor(%fileToOpen);
              end
              clear("%fileToOpen");'
            type="0"/>
        </submenu>
        <submenu label="&amp;Load environment...">
            <callback
            instruction='
              %fileToLoad = uigetfile("*.sav", "", gettext("Select a file to load"));
              if ~(%fileToLoad == "") then
                load(%fileToLoad);
                disp(msprintf(gettext("Environment loaded.\n")));
              end
              clear("%fileToLoad");'
            type="0"/>
        </submenu>
        <submenu label="&amp;Save environment...">
            <callback
            instruction='
              %fileToSave = uiputfile("*.sav", "", gettext("Select a file to write"));
              if ~(%fileToSave == "") then
                if (fileparts(%fileToSave, "extension") == "") then
                  %fileToSave = %fileToSave + ".sav";
                end
                save(%fileToSave);
                disp(msprintf(gettext("Environment saved.\n")));
              end
              clear("%fileToSave");'
            type="0"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Change current directory...">
            <callback
            instruction='
              %newDir = uigetdir(pwd(), gettext("Select a directory"));
              if ~(%newDir == "") then
                cd(%newDir);
              end
              clear("%newDir");'
            type="0"/>
        </submenu>
        <submenu label="&amp;Display current directory">
            <callback instruction='if iswaitingforinput() then printf("\n%s\n\n%s\n",prompt(),pwd()); else printf("\n\n%s\n\n",pwd());end' type="0"/>
        </submenu>
        <separator/>
        <submenu label="P&amp;age setup...">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.pageSetup' type="3"/>
        </submenu>
        <submenu label="&amp;Print...">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.printConsoleContents' type="3"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Quit">
            <callback instruction='exit();' type="0"/>
        </submenu>
    </menu>

    <!-- Edit menu -->
    <menu label="&amp;Edit" enabled="false">
        <submenu label="C&amp;ut">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.cutConsoleSelection' type="3"/>
        </submenu>
        <submenu label="&amp;Copy">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.copyConsoleSelection' type="3"/>
        </submenu>
        <submenu label="&amp;Paste">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.pasteClipboardIntoConsole' type="3"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Empty clipboard">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.emptyClipboard' type="3"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Select all">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.selectAllConsoleContents' type="3"/>
        </submenu>
    </menu>

    <!-- Preferences menu -->
    <menu label="&amp;Preferences" enabled="false">
        <submenu label="&amp;Colors">
            <submenu label="Console &amp;Background...">
                <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.changeConsoleBackground' type="3"/>
            </submenu>
            <submenu label="Console &amp;Font...">
                <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.changeConsoleForeground' type="3"/>
            </submenu>
        </submenu>
        <submenu label="&amp;Font...">
            <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.changeConsoleFont' type="3"/>
        </submenu>
        <submenu label="Show/Hide &amp;Toolbar">
              <callback
              instruction='
                if toolbar(-1)=="on" then
                  toolbar(-1, "off");
                else
                  toolbar(-1, "on");
                end'
              type="0"/>
        </submenu>
        <separator/>
        <submenu label="Clear &amp;History">
           <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.clearHistory' type="3"/>
        </submenu>
        <submenu label="Clear C&amp;onsole">
          <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.clear' type="3"/>
        </submenu>
    </menu>

    <!-- Control menu -->
    <menu label="&amp;Control" enabled="false">
        <submenu label="&amp;Resume">
            <callback instruction='resume;' type="-2"/>
        </submenu>
        <submenu label="&amp;Abort">
            <callback instruction='abort;' type="-2"/>
        </submenu>
        <submenu label="&amp;Interrupt">
            <callback instruction='pause;' type="-2"/>
        </submenu>
    </menu>

    <!-- Applications menu -->
    <menu label="&amp;Applications" enabled="false">
        <submenu label="&amp;Editor">
            <callback instruction='editor();' type="0"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Xcos">
            <callback instruction='if with_module("xcos") then xcos(); else disp(gettext("Please install xcos module.")); end' type="0"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Matlab to Scilab translator">
            <callback instruction='if with_module("m2sci") then mfile2sci(); else disp(gettext("Please install m2sci module.")); end' type="0"/>
        </submenu>
        <separator/>
        <submenu label="M&amp;odule manager - ATOMS">
            <callback instruction='if with_module("atoms") then atomsGui(); else disp(gettext("Please install atoms module.")); end' type="0"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Command History">
            <callback instruction='org.scilab.modules.history_manager.commandhistory.CommandHistory.toggleVisibility' type="3"/>
        </submenu>
    </menu>

    <!-- Help menu -->
    <menu label="&amp;?" enabled="false">
        <submenu label="Scilab &amp;Help">
            <callback instruction='help();' type="0"/>
        </submenu>
        <separator/>
        <submenu label="Scilab &amp;Demonstrations">
             <callback instruction='demo_gui();' type="0"/>
        </submenu>
        <separator/>
        <submenu label="&amp;Web links">
            <submenu label="Scilab &amp;Web Site">
                <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.openScilabWebSite' type="3"/>
            </submenu>
            <submenu label="Scilab &amp;ATOMS Web Site">
                <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.openAtomsScilabWebSite' type="3"/>
            </submenu>
            <submenu label="&amp;Contributions">
                <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.openContributionsWebSite' type="3"/>
            </submenu>
            <submenu label="&amp;Bug And Request database">
                <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.openBugzillaWebSite' type="3"/>
            </submenu>
            <submenu label="&amp;Mailing lists">
                <callback instruction='org.scilab.modules.gui.bridge.CallScilabBridge.openMailingListWebSite' type="3"/>
            </submenu>
        </submenu>
        <separator/>
        <submenu label="&amp;About Scilab...">
              <callback instruction='about()' type="0"/>
        </submenu>
    </menu>
</menubar>
