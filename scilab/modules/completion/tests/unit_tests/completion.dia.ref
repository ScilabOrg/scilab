// =============================================================================
// Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) 2007-2008 - INRIA
// Copyright (C) 2013 - Scilab Enterprises - Simon MARCHETTO
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================
// <-- CLI SHELL MODE -->
//===============================
// unit tests completion
//===============================
// File paths
if (getos() == "Windows") then;
    r = completion('C:\Documents and');
    if r <> 'Documents and Settings\' then bugmes();quit;end
    r = completion('c:\documents and');
    if r <> 'Documents and Settings\' then bugmes();quit;end
else;
    r = completion('/tm');
    if r <> '/tmp' then bugmes();quit;end
    r = completion('/TM');
    if r <> '/tmp' then bugmes();quit;end
end;
r = completion(SCI+'/t');
if r <> ['thirdparty\'; 'tools\'] then bugmes();quit;end
// Predefined variables
r = completion('ho', 'variables');
if r <> 'home' then bugmes();quit;end
r = completion('HO', 'variables');
if r <> 'home' then bugmes();quit;end
r = completion('%na');
if r <> '%nan' then bugmes();quit;end
r = completion('%Na');
if r <> '%nan' then bugmes();quit;end
r = completion('TMP');
if r <> 'TMPDIR' then bugmes();quit;end
r = completion('Tmp');
if r <> 'TMPDIR' then bugmes();quit;end
r = completion('%', 'variables');
if r <> ['%F'; '%T'; '%e'; '%eps'; '%f'; '%fftw'; '%gui'; '%i'; '%inf'; '%io';'%modalWarning';'%nan';'%pi';'%s';'%t';'%tk';'%toolboxes';'%toolboxes_dir';'%z'] then bugmes();quit;end
// User variables
variable1_completion1 = 1;
variable1_completion2 = 2;
r = completion('variable1_comp');
if r <> ['variable1_completion1'; 'variable1_completion2'] then bugmes();quit;end
r = completion('VARIABLE1_COMP');
if r <> ['variable1_completion1'; 'variable1_completion2'] then bugmes();quit;end
variable2_completion = 1;
VARIABLE2_COMPLETION = 2;
r = completion('variable2_comp');
if r <> ['VARIABLE2_COMPLETION'; 'variable2_completion'] then bugmes();quit;end
r = completion('VARIABLE2_COMP');
if r <> ['VARIABLE2_COMPLETION'; 'variable2_completion'] then bugmes();quit;end
// Predefined functions, macros and commands
r = completion('floo');
if r <> 'floor' then bugmes();quit;end
r = completion('FLOO');
if r <> 'floor' then bugmes();quit;end
r = completion('abort');
if r <> 'abort' then bugmes();quit;end
r = completion('Abort');
if r <> 'abort' then bugmes();quit;end
// User functions, macros, commands
function [] = function_completion(x);
endfunction;
r = completion('function_comp');
if r <> 'function_completion' then bugmes();quit;end
r = completion('FUNCTION_COMP');
if r <> 'function_completion' then bugmes();quit;end
function [] = FUNCTION_COMPLETION(x);
endfunction;
r = completion('function_comp');
if r <> ['FUNCTION_COMP'; 'function_completion'] then bugmes();quit;end
r = completion('FUNCTION_COMP');
if r <> ['FUNCTION_COMP'; 'function_completion'] then bugmes();quit;end
// Filter argument
r = completion('ho');
if r <> ['home'; 'horizontalalignment'; 'horner'; 'host'; 'householder'] then bugmes();quit;end
r = completion('ho', 'functions');
if r <> 'host' then bugmes();quit;end
r = completion('ho', 'commands');
if r <> [] then bugmes();quit;end
r = completion('ho', 'macros');
if r <> ['horner'; 'householder'] then bugmes();quit;end
r = completion('ho', 'variables');
if r <> 'home' then bugmes();quit;end
r = completion('ho', 'graphic_properties');
if r <> 'horizontalalignment' then bugmes();quit;end
r = completion('ho', 'files');
if r <> [] then bugmes();quit;end
r = completion('abo');
if r <> ['abort'; 'about'] then bugmes();quit;end
r = completion('abo', 'functions');
if r <> 'about' then bugmes();quit;end
r = completion('abo', 'commands');
if r <> 'abort' then bugmes();quit;end
r = completion('abo', 'variables');
if r <> [] then bugmes();quit;end
r = completion('abo', 'macros');
if r <> [] then bugmes();quit;end
r = completion('abo', 'graphic_properties');
if r <> [] then bugmes();quit;end
r = completion('abo', 'files');
if r <> [] then bugmes();quit;end
// Output arguments
[functions,commands,variables,macros,graphic_properties,files] = completion('ho');
if functions <> ['host'] then bugmes();quit;end
if commands <> [] then bugmes();quit;end
if variables <> ['home'] then bugmes();quit;end
if macros <> ['horner'; 'householder'] then bugmes();quit;end
if graphic_properties <> ['horizontalalignment'] then bugmes();quit;end
if files <> [] then bugmes();quit;end
[functions,commands,variables,macros,graphic_properties,files] = completion('abo');
if functions <> ['about'] then bugmes();quit;end
if commands <> ['abort'] then bugmes();quit;end
if variables <> [] then bugmes();quit;end
if macros <> [] then bugmes();quit;end
if graphic_properties <> [] then bugmes();quit;end
if files <> [] then bugmes();quit;end
if (getos() == "Windows") then;
    [functions,commands,variables,macros,graphic_properties,files] = completion('C:\Documents and');
    if files <> ['Documents and Settings\'] then bugmes();quit;end
else;
    [functions,commands,variables,macros,graphic_properties,files] = completion('/tm');
    if files <> ['/tmp'] then bugmes();quit;end
end;
