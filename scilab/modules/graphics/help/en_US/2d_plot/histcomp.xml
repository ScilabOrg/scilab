<?xml version='1.0' encoding='UTF-8'?>
<!--
 * Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
 * Copyright (C) 2013 - Scilab Enterprises - Paul Bignier
 *
 * This file must be used under the terms of the CeCILL.
 * This source file is licensed as described in the file COPYING, which
 * you should have received as part of this distribution.  The terms
 * are also available at
 * http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.txt
 *
 --><!-- This document was created with Syntext Serna Free. -->
<refentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svg="http://www.w3.org/2000/svg" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:db="http://docbook.org/ns/docbook" xmlns:scilab="http://www.scilab.org" xml:lang="en" xml:id="histcomp">
    <refnamediv>
        <refname>histcomp</refname>
        <refpurpose>computes an histogram</refpurpose>
    </refnamediv>
    <refsynopsisdiv>
        <title>Calling Sequence</title>
        <synopsis>
            res = histcomp(n, data [,yunit] [,cumulative])
            res = histcomp(x, data [,yunit] [,cumulative])
        </synopsis>
    </refsynopsisdiv>
    <refsection>
        <title>Arguments</title>
        <variablelist>
            <varlistentry>
                <term>n</term>
                <listitem>
                    <para>positive integer (number of classes)</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>x</term>
                <listitem>
                    <para>
                        increasing vector defining the classes (<literal>x</literal> may have at least 2 components)
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>res</term>
                <listitem>
                    <para>
                        struct containing three fields: <literal>x</literal>,
                        <literal>y</literal> and <literal>p</literal>,
                        representing the classes, the data and the number of elements.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>yunit</term>
                <listitem>
                    <para>
                        string, indicating the type of frequency required:
                        "count", "normalized", "relative" or "percentage".
                        By default, "count" is selected.
                    </para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>cumulative</term>
                <listitem>
                    <para>a boolean (%f (default value) or %t)</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </refsection>
    <refsection>
        <title>Description</title>
        <para>
            This function computes a histogram of the <literal>data</literal> vector using the
            classes <literal>x</literal>. When the number <literal>n</literal> of classes is provided
            instead of <literal>x</literal>, the classes are chosen equally spaced and
            <emphasis>x(1) = min(data) &lt; x(2) = x(1) + dx &lt; ... &lt; x(n+1) = max(data)</emphasis>
            with <emphasis>dx = (x(n+1)-x(1))/n</emphasis>.
        </para>
        <para>
             The classes are defined by <literal>C1 = [x(1), x(2)]</literal> and <literal>Ci = ( x(i), x(i+1)]</literal> for i &gt;= 2.
            Noting <literal>Nmax</literal> the total number of <literal>data</literal> (Nmax = length(data))
            and <literal>Ni</literal> the number of <literal>data</literal> components falling in
            <literal>Ci</literal>, the value of the histogram for <literal>x</literal> in
            <literal>Ci</literal> is equal to <emphasis>Ni/(Nmax (x(i+1)-x(i)))</emphasis> when
            <literal>"normalized"</literal> is selected and else, simply equal to <emphasis>Ni</emphasis>.
            When normalization occurs the histogram verifies:
        </para>
        <para>
            <latex style="display"><![CDATA[ \int_{x(1)}^{x(n+1)}h(x)\,\mathrm{d}x=1 ]]></latex>
        </para>
        <para>
            when <emphasis>x(1)&lt;=min(data)</emphasis> and <emphasis>max(data) &lt;= x(n+1)</emphasis>
        </para>
        <para>
            The <literal>res</literal> output is destined to be passed to <link linkend="histplot">histplot</link>.
        </para>
    </refsection>
    <refsection>
        <title>Examples</title>
        <simplelist>
            <member> Example #1: variations around a histogram of a gaussian random sample
                <programlisting role="example"><![CDATA[
d = rand(1, 10000, 'normal');  // The gaussian random sample
res = histcomp(20, d, "normalized")
clf(); histplot(res, normalization=%f)
res = histcomp(20, d)
clf(); histplot(res, normalization=%f)
res = histcomp(20, d, "normalized")
clf(); histplot(res, normalization=%f, leg='rand(1,10000,''normal'')', style=5)
res = histcomp(20, d, "normalized")
clf(); histplot(res, normalization=%f, leg='rand(1,10000,''normal'')',style=16, rect=[-3,0,3,0.5]);
]]></programlisting>
                <scilab:image>
                    d = rand(1, 10000, 'normal');
                    res = histcomp(20, d, "normalized")
                    clf(); histplot(res, normalization=%f)
                    res = histcomp(20, d)
                    clf(); histplot(res, normalization=%f)
                    res = histcomp(20, d, "normalized")
                    clf(); histplot(res, normalization=%f, leg='rand(1,10000,''normal'')', style=5)
                    res = histcomp(20, d, "normalized")
                    clf(); histplot(res, normalization=%f, leg='rand(1,10000,''normal'')',style=16, rect=[-3,0,3,0.5]);
                </scilab:image>
            </member>
            <member>
                Example #2: histogram of a binomial (B(6,0.5)) random sample
                <programlisting role="example"><![CDATA[
d = grand(1000,1,"bin", 6, 0.5);
c = linspace(-0.5,6.5,8);
clf()
subplot(2,1,1)
res = histcomp(c, d, "normalized")
histplot(res, normalization=%f, style=2)
xtitle("Normalized histogram")
subplot(2,1,2)
res = histcomp(c, d)
histplot(res, normalization=%f, style=5)
xtitle("Non normalized histogram")
]]></programlisting>
                <scilab:image localized="true">
                    d = grand(1000,1,"bin", 6, 0.5);
                    c = linspace(-0.5,6.5,8);
                    clf()
                    subplot(2,1,1)
                    res = histcomp(c, d, "normalized")
                    histplot(res, normalization=%f, style=2)
                    xtitle("Normalized histogram")
                    subplot(2,1,2)
                    res = histcomp(c, d)
                    histplot(res, normalization=%f, style=5)
                    xtitle("Non normalized histogram")
                </scilab:image>
            </member>
            <member>
                Example #3: histogram of an exponential random sample
                <programlisting role="example"><![CDATA[
lambda = 2;
X = grand(100000,1,"exp", 1/lambda);
Xmax = max(X);
res = histcomp(40, X, "normalized")
clf()
histplot(res, normalization=%f, style=2)
x = linspace(0,max(Xmax),100)';
plot2d(x,lambda*exp(-lambda*x),strf="000",style=5)
legend(["exponential random sample histogram" "exact density curve"]);
]]></programlisting>
                <scilab:image localized="true">
                    lambda = 2;
                    X = grand(100000,1,"exp", 1/lambda);
                    Xmax = max(X);
                    res = histcomp(40, X, "normalized")
                    clf()
                    histplot(res, normalization=%f, style=2)
                    x = linspace(0,max(Xmax),100)';
                    plot2d(x,lambda*exp(-lambda*x),strf="000",style=5)
                    legend(["exponential random sample histogram" "exact density curve"]);
                </scilab:image>
            </member>
            <member>
                Example #4: the frequency polygon chart and the histogram of a gaussian random sample
                <programlisting role="example"><![CDATA[
n = 10;
data = rand(1, 1000, "normal");
res = histcomp(n, data, "normalized")
clf(); histplot(res, normalization=%f, style=12, polygon=%t);
legend(["normalized histogram" "frequency polygon chart"]);
]]></programlisting>
                <scilab:image localized="true">
                    n = 10;
                    data = rand(1, 1000, "normal");
                    res = histcomp(n, data, "normalized")
                    clf(); histplot(res, normalization=%f, style=12, polygon=%t);
                    legend(["normalized histogram" "frequency polygon chart"]);
                </scilab:image>
            </member>
        </simplelist>
    </refsection>
    <refsection role="see also">
        <title>See Also</title>
        <simplelist type="inline">
            <member>
                <link linkend="histplot">histplot</link>
            </member>
            <member>
                <link linkend="hist3d">hist3d</link>
            </member>
            <member>
                <link linkend="plot2d">plot2d</link>
            </member>
            <member>
                <link linkend="dsearch">dsearch</link>
            </member>
        </simplelist>
    </refsection>
    <refsection>
        <title>History</title>
        <revhistory>
            <revision>
                <revnumber>5.5.0</revnumber>
                <revdescription>
                    Introduction
                </revdescription>
            </revision>
        </revhistory>
    </refsection>
</refentry>
