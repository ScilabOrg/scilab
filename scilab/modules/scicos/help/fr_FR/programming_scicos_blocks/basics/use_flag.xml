<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Scicos
 * 
 * Copyright (C) INRIA - METALAU Project <scicos@inria.fr> (HTML version)
 * Copyright (C) DIGITEO - Scilab Consortium (XML Docbook version)
 * 
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program; if not, write to the Free Software
 * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.
 * 
 * See the file ./license.txt
 -->
<refentry xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svg="http://www.w3.org/2000/svg" xmlns:mml="http://www.w3.org/1998/Math/MathML" xmlns:db="http://docbook.org/ns/docbook" version="5.0-subset Scilab" xml:id="use_flag">
  <refnamediv>
    <refname>use_flag</refname>
    <refpurpose>Utilisation des flags dans les fonctions de calcul Scicos</refpurpose>
  </refnamediv>
  <refsection id="Contenu_use_flag">
    <title>Contenu</title>
    <itemizedlist>
      <listitem>
        <para>
          <link linkend="use_flag">use_flag - Utilisation des flags dans les fonctions de calcul Scicos</link>
        </para>
      </listitem>
      <listitem>
        <itemizedlist>
          <listitem>
            <para>
              <xref linkend="Module_use_flag">Module</xref>
            </para>
          </listitem>
          <listitem>
            <para>
              <xref linkend="Description_use_flag">Description</xref>
            </para>
          </listitem>
          <listitem>
            <para>
              <xref linkend="Auteurs_use_flag">Auteurs</xref>
            </para>
          </listitem>
        </itemizedlist>
      </listitem>
    </itemizedlist>
  </refsection>
  <refsection id="Module_use_flag">
    <title>Module</title>
    <itemizedlist>
      <listitem>
        <para>
          <link linkend="scicos_manual">Scicos</link>
        </para>
      </listitem>
    </itemizedlist>
  </refsection>
  <refsection id="Description_use_flag">
    <title>Description</title>
    <para>Description</para>
    <para>
During the simulation, the computational functions will be called with a given flag
that corresponds to the task to be realized and with the event number by which it has been activated.

</para>
    <para>

</para>
    <itemizedlist>
      <listitem>
        <para><emphasis role="bold">Flag 4: Initialization</emphasis> This is done only once in the initialization phase for all blocks. Input event numbers are not used in that case. Outputs and states can be initialized. Some blocks use also this flag to open files, to do allocation and initialization of the field or initialize graphic windows. </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 6: Initialization, fixed-point computation</emphasis> Flag 6 is used to set constraints that must be satisfied at the initial time. Scicos uses a fixed point computation scheme to force the constraints so the blocks are called more than once with flag 6 at time 0. This is a special initialization technique for example to find the steady state of a system before running the simulation. Input event numbers are not used in this case. </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 1: Output computation</emphasis> The output computation can be performed many times in one time step of the simulation in particular when the diagram contains blocks that use both discrete and continuous states and zero crossing surfaces. In the current version of Scicos all blocks are called with flag = 1 at least once in every simulation time step, even if they don't have any outputs. </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 2: Discrete state computation</emphasis> If blocks use states, this flag is when the state registers , , , must be set during discrete activation (with<inlinemediaobject><imageobject><imagedata fileref="../../../images/use_flag_img1_fr.gif" align="center" valign="middle"/></imageobject></inlinemediaobject> 0) but also to compute in the case of activation due to an internal zero crossing, in which case the input event number will be -1. </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 0: Continuous state derivative computation</emphasis> This flag is used when the derivative or residual of the continuous state needs to be set. Only blocks that use continuous state are called with flag=0. </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 3: Output event computation</emphasis> Output event computation is done for blocks with output event register during discrete activation but also zero crossing activation. Note that in this latter case, the input event number will be -1. </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 9: Modes and zero crossing computation</emphasis> Flag 9 is used to evaluate the function of zero crossings and to set the modes, . </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 5: Ending</emphasis> All blocks are called with flag = 5 before the end of the simulation or when the simulator aborts the simulation in case an error occurs during the simulation. Input event numbers are not used in that case. </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 7: Properties of the continuous state variables</emphasis> Set the properties of the continuous state variables. Used for the description of DAE system (also internally used and generated by Scicos/Modelica implementation). </para>
      </listitem>
      <listitem>
        <para><emphasis role="bold">Flag 10: Jacobian computation</emphasis> Computation of Jacobian matrix of the system (internally used and generated by Scicos/Modelica implementation).</para>
      </listitem>
    </itemizedlist>
  </refsection>
  <refsection id="Auteurs_use_flag">
    <title>Auteurs</title>
    <para><emphasis role="bold">Alan Layec</emphasis> - INRIA</para>
  </refsection>
</refentry>
