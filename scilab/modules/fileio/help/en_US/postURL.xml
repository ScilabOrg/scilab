<?xml version="1.0" encoding="UTF-8"?>
<!--
 * Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
 * Copyright (C) - S/E - Kartik Gupta
 * 
 * This file must be used under the terms of the CeCILL.
 * This source file is licensed as described in the file COPYING, which
 * you should have received as part of this distribution.  The terms
 * are also available at
 * http://www.cecill.info/licences/Licence_CeCILL_V2.1-en.txt
 *
 -->
<refentry xml:id="postURL" xml:lang="en"
          xmlns="http://docbook.org/ns/docbook"
          xmlns:xlink="http://www.w3.org/1999/xlink"
          xmlns:svg="http://www.w3.org/2000/svg"
          xmlns:ns3="http://www.w3.org/1999/xhtml"
          xmlns:mml="http://www.w3.org/1998/Math/MathML"
          xmlns:scilab="http://www.scilab.org"
          xmlns:db="http://docbook.org/ns/docbook">
    
    <refnamediv>
        <refname>postURL</refname>
        
        <refpurpose>Post to a URL and downloading the response (HTTP, HTTPS...) </refpurpose>
    </refnamediv>
    
    <refsynopsisdiv>
        <title>Calling Sequence</title>
        
        <synopsis>filename = postURL(URL,post_argument_names,post_argument_values);
            [filename, [content]] = postURL(URL,post_argument_list,post_argument_values [, targetDir [, username [, password]]]]);
            [filename, [content]] = postURL(URL,post_argument_list,post_argument_values [, targetFile [, username [, password]]]]);
        </synopsis>
    </refsynopsisdiv>
    
    <refsection>
        <title>Arguments</title>
        <variablelist>
            <varlistentry>
                <term>URL</term>
                <listitem>
                    <para>String: An URL. Supported and tested: HTTP, HTTPS, FTP (IPv4 and IPv6)</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>post_argument_list</term>
                <listitem>
                    <para>A list of strings containing the names of the post variables</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>post_argument_values</term>
                <listitem>
                    <para>A list of strings containing the values for the variables mentioned in the post_argument_list in the same order.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>targetDir</term>
                <listitem>
                    <para>String optional parameter: In which directory the file will be stored (current directory if empty)</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>targetFile</term>
                <listitem>
                    <para>String optional parameter: Where (and under which name) the file will be stored (current directory if empty)</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>username</term>
                <listitem>
                    <para>String optional parameter: Username for the websites which require authentication</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>password</term>
                <listitem>
                    <para>String optional parameter: Password for the websites which require authentication</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>filename</term>
                <listitem>
                    <para>String: The path to the downloaded file</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term>content</term>
                <listitem>
                    <para>String: The content to the downloaded file</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </refsection>
    
    <refsection>
        <title>Description</title>
        
        <para>Posting to a URL and downloading the reponse</para>
        
        <para>
            postURL posts to a URL and downloads the reponse. By default, postURL will use the same name as provided in the URL. However, under some circumstances (for example, <emphasis role="italic">http://www.scilab.org/</emphasis>), the filename is not provided by the URL itself, postURL will rename the file to <emphasis role="italic">index.html</emphasis>
        </para>
        
        <para>content contains the content of a page pointed by an URL.</para>
        
        <para>
            This function is based on the <ulink url="http://curl.haxx.se/libcurl/">curl library</ulink>.
        </para>
        <para>post_argument_list and the post_argument_values contains the post variables and their values to be posted on the page.</para>
        
        <para> Username and Password can be specified for the websites which required authentication. The authentication method used is the CURLAUTH_ANY provided by CURLOPT_HTTPAUTH parameter of the libcurl library.</para>
        
        <para>IPv6 (and obviously IPv4) are supported out-of-the box by postURL.</para>
        
        <para>Proxy configuration is enabled in this version, it can be modified in the Preferences under the rubric "Internet".</para>
        
        <para>
            The <emphasis role="italic">CURLOPT_FOLLOWLOCATION</emphasis> curl option is activated to make sure the download follow the URL.
        </para>
        
        <para>
            <literal>postURL</literal> is based on libcurl. The version of this library in the official Scilab binary has been compiled with HTTP, HTTPS, FTP and FTPS support. If Scilab has been installed through a packaging system in a distribution, it is likely that <ulink url="http://curl.haxx.se/docs/features.html">other protocols</ulink> than HTTP, HTTPS and FTPS will work. However, they have not been tested enough.
        </para>
        
    </refsection>
    
    <refsection>
        <title>Examples</title>
        
        <programlisting role="example">
            
            filename = postURL("http://example.com",["var1","var2"],["test1","test2"]);
        </programlisting>
    </refsection>
    <refsection role="see also">
        <title>See Also</title>
        <simplelist type="inline">
            <member>
                <link linkend="splitURL">splitURL</link>
            </member>
        </simplelist>
    </refsection>
    
    <refsection>
        <title>History</title>
        <revhistory>
            <revision>
                <revnumber>5.6.0</revnumber>
                <revremark>
                    Function <literal>postURL()</literal> introduced
                </revremark>
            </revision>
        </revhistory>
    </refsection>
    
</refentry>
