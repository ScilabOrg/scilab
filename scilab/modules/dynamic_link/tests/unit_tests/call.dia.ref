// =============================================================================
// Scilab ( http://www.scilab.org/ ) - This file is part of Scilab
// Copyright (C) ????-2008 - INRIA
//
//  This file is distributed under the same license as the Scilab package.
// =============================================================================
//================================================
// test call
//================================================
foo=['void foo(double *a,double *b,double *c)';
     '{ *c = *a + *b; }'  ];
// we use TMPDIR for compilation
	
if ~c_link('foo') then
  curPath = getcwd();
  chdir(TMPDIR);
  mputl(foo,'foo.c');
  ilib_for_link(['foo'],'foo.o',[],"c");
   Generate a loader file
   Generate a Makefile
   ilib_gen_Make: Copy compilation files (Makefile*, libtool...) to TMPDIR
   ilib_gen_Make: Copy foo.c to TMPDIR
   ilib_gen_Make: Modification of the Makefile in TMPDIR.
   Running the Makefile
  // disable message
  warning_mode = warning('query');
  warning('off');
  // load the shared library
  exec loader.sce ;
  // enable message
  warning(warning_mode);
  chdir(curPath)
 ans  =
 
  T  
end	
//5+7 by C function
v = call('foo',5,1,'d',7,2,'d','out',[1,1],3,'d')
 v  =
 
    12.  
if v <> 12 then bugmes();quit;end
//================================================
